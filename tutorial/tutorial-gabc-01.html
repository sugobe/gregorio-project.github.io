<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!--
  Gregorio web site.
  Copyright (C) 2007-2015 The Gregorio project

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
  <title>Gregorio project website</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="description" content="Free software for typesetting Gregorian chant" lang="en">
  <meta name="keywords" content="Gregorian chant, gregorio, gabc, gregoriotex" lang="en">
  <meta name="author" content="The Gregorio project">
  <link rel="shortcut icon" href="../illus/fav.ico">
  <link rel="icon" href="../illus/fav.ico">
  <link rel="stylesheet" href="../style.css" type="text/css" title="default">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="../gregorio-menu.js"></script>
  <script>
    var context = 'gregorio';
    var title = 'Gregorio project website'
  </script>
</head>

<body>
  <div id="ban">
    <img src="../illus/harpedroite.png" title="" class="hd" alt="" />
    <a id="haut" name="haut"></a>
    <div id="banniere">
    </div>
  </div>
  <script>write_gre_menu();</script>
    <div class="flux">
    &nbsp;
    <!-- IE patch-->
    <div class="text">
      <!-- End of header -->
<!-- header -->
<script>
    context = 'gregorio';
    title = 'gabc Tutorial';
</script>

<style type="text/css">
  .commandblock {font-family: courier; padding-left: 150px;}
  .commandline {font-family: courier;}
</style>
<h1>GABC Tutorial</h1>

<p>The purpose of this tutorial is to demonstrate how to represent a Gregorian chant score in gabc.  However, we are not going to assume a familiarity with the terminology used to describe such a score in order to make this introduction easier to follow for those who are relatively new to chant more generally (and not just typesetting it).</p>

<p>Documentation for the gabc notation which we use in this tutorial can be found <a href="../gabc/index.html">here</a>.  We will also link to the various parts of the documentation as it becomes relavent.  A <a href="../gabc/summary-gabc.pdf">one-page summary is also on-line</a> (PDF).</p>

<p>In this tutorial we’ll be using the <a href="http://apps.illuminarepublications.com/gregorio/">Illuminare Score Editor</a> and all the images will be derived from that tool because it has a built-in preview window that gives us nearly instantaneous feedback about what we’re doing. However, you could also use the <a href="http://gregorio.gabrielmass.com/cgi/process.pl">Gregorio Chant Engraver</a> if you prefer that.  Obviously the images won’t match and some of the specific interface issues are different (including the lack of an instant preview), but the gabc itself is identical and we are specifically going to focus on that gabc notation.  This makes for a much easier introduction for those not familiar with <span class="tex">T<span class="epsilon">e</span>X</span>.  Once you’re comfortable with gabc notation, then you’ll find learning how to integrate it into larger projects using <span class="tex">T<span class="epsilon">e</span>X</span> much easier (as is done in our <a href="./tutorials.html">other tutorials</a>).</p>

<h2>Exaudivit</h2>

<p>Here is a score from the <i lang="la">Graduale Romanum</i>:</p>

<div class="legende">
<a href="Exaudivit-00.png"><img src="Exaudivit-00.png" alt="Our source and goal.  Click to enlarge..." width=500/></a>
</div>

<p>It’s not the simplest score in the world, but it is not overly complicated either and it illustrates several of the most common features of Gregorian chant allowing us to call out how to represent these using gabc as we go.</p>

<p>Obviously the first step is to fire up <a href="http://apps.illuminarepublications.com/gregorio/">Illuminare Score Editor</a>.  When we do so we get a screen that looks like this:</p>

<div class="legende">
<a href="Exaudivit-01.png"><img src="Exaudivit-01.png" alt="Illuminare Score Editor on open.  Click to enlarge..." width=500/></a>
</div>

<p>The top most pane allows us to control certain elements of how the score appears.  We won’t be dealing with these in this tutorial.</p>

<p>The bottom most pane shows us a preview of our score.  Illuminare will update this in real time as we work so you’ll be able to see exactly how the gabc you’re entering translates into a score.</p>

<p>The pane in the middle is where we’ll be entering our gabc code and as you can see, it’s already got some code in it by default.  Let’s start by explaining what’s already there line by line:</p>

<dl>
    <dt><code>user-notes: ;</code></dt>
        <dd>This line is an empty header field.  <a href="../gabc/index.html#header">Headers</a> are for describing you score so that when you come back to the file later you can figure out what it is, where it came from, and other things like that.  This particular field is there for you to record any information that you want about the score.  In this case I’m going to make a note that this is part of this tutorial.  That note goes between the colon (<code>:</code>) and the semi-colon (<code>;</code>).</dd>
    <dt><code>commentary: ;</code></dt>
        <dd>This line is also an empty header field, but it’s for specific information about the score.  In gabc parlance the commentary is the text that appears just above the top line of the staff and is flushed right.  This is usually a scripture citation.  Our piece, however, doesn’t have this line so we’re going to delete this line.</dd>
    <dt><code>annotation: ;</code></dt>
        <dd>Like commentary, annotations refer to a very specific part of the score in gabc parlance.  In this case it’s the text which goes above the initial.  Our score has two lines there, and fortunately gabc supports up to two annotation headers.</dd>
    <dt><code>centering-scheme: english;</code></dt>
        <dd>This header is actually a legacy header which is no longer supported in Gregorio.  It formerly controlled how the text of the lyrics aligned with the notes above.  This is now controlled in the <span class="tex">T<span class="epsilon">e</span>X</span> of a document, but because Illuminare doesn’t give you access to that, it's continued use of an older version of Gregorio means that you still have access to it.  In this case our text is in Latin and thus follows the <a href="../graphy.html">Latin alignment conventions</a>.  In more recent versions of Gregorio we refer to this as <code>vowel</code> centering in order to be more descriptive.</dd>
    <dt><code>%fontsize: 12;</code></dt>
    <dt><code>%spacing: vichi;</code></dt>
    <dt><code>%font: OFLSortsMillGoudy;</code></dt>
    <dt><code>%width: 4.5;</code></dt>
    <dt><code>%height: 11;</code></dt>
        <dd>These headers are not official headers, but rather ones which is specific to Illuminare.  You’ll notice that the correspond to the features in the topmost panel and serve to record those settings so that you can duplicate them later should you need to (say for another score which will be part of the same document and thus should look similar to the first score).  The <code>%</code> at the beginning of each line indicates that the line is to be treated as a comment.  That is, Gregorio is to ignore it when parsing the gabc.</dd>
    <dt><code>%%</code></dt>
        <dd>Unlike the single <code>%</code> on the previous lines, this double <code>%%</code> does not instruct Gregorio to ignore this line.  Instead it indicates that we’re done with the headers and ready to begin the score itself.</dd>
    <dt><code>(c4)</code></dt>
        <dd>This is the first part of the score and indicates the starting clef.  There are two <a href="../gabc/index.html#clef">clefs</a> in gabc: do (<code>c</code>) and fa (<code>f</code>) and each can be on any of the 4 lines (1 on the bottom, 4 on the top).  This here is a do clef on the 4th line, which is actually what we have in our score, so we’ll leave it alone.</dd>
</dl>

<p>Besides these “starter” headers provided by Illuminare, I know other information about this particular score which I’m also going to fill in.  Once I do that I get something that looks like the following:</p>

<div class="legende">
<a href="Exaudivit-02.png"><img src="Exaudivit-02.png" alt="Finished headers.  Click to enlarge..." width=500/></a>
</div>

<p>As you can see, the user notes have been placed as text above the score.  This is what is called “header capture” and is a feature of Gregorio<span class="tex">T<span class="epsilon">e</span>X</span> that allows you to make use (in a variety of ways) of the information recorded in any of the header fields of your score without having to retype (or even copy/paste) it into the main document.  It is controlled entirely on the <span class="tex">T<span class="epsilon">e</span>X</span> side of things, however, so Illuminare is handling this in the background for us and we cannot adjust it in this interface.  The best we could do here is to comment out the <code>user-notes</code> line (<i>i.e.</i>, put a <code>%</code> in front of it) if we wanted to make that line disappear.</p>

<p id="annotations">You’ll also note that even though we put in the <code>annotation</code> headers, the annotations themselves have not shown up in the output.  That’s because the annotations appear above the initial.  Since we don’t have an initial yet, there is no place for the annotations to appear.  So let’s put in the initial, indeed, let’s put in the whole first word:</p>

<div class="legende">
<a href="Exaudivit-03.png"><img src="Exaudivit-03.png" alt="First word.  Click to enlarge..." width=500/></a>
</div>

<p>Having done this we can now see another limitation of Illuminare: it can only handle 1 annotation line.  The second line in the gabc is ignored.  We can’t force Illuminare to change this behavior, so we’re going to have to live with it (at least until you’re ready to move on to learning <span class="tex">T<span class="epsilon">e</span>X</span>).</p>

<p>So, having put in the first word, it’s now time to start adding the notes.  Now, notes are <a href="../gabc/index.html#text">assigned to particular syllables</a> and are marked off from the text of the lyrics by parentheses (<code>()</code>).  Furthermore, each note (<a href="../gabc/index.html#heights">the pitch of the note</a>) is represented by a particular letter.  In this scheme <code>g</code> is in the middle space of the staff and we go backwards in the alphabet (towards <code>a</code>) as we go down and forwards in the alphabet as we go up.  Unlike modern notes, there is no point at which the letters start to repeat.  That’s because these letters are <b>not</b> note names, they are staff positions.  For a similar reason the position or type of the clef <b>does not</b> affect the letters.  <code>g</code> will always be the middle position (for a 4-line staff, it’s actually possible to have 2-, 3-, or 5-line staffs which would have a different middle position, but we’re going to ignore those because they are really uncommon).</p>

<p>Additionally stacked notes (called a <i lang="la">pes</i> or <i lang="la">podatus</i>) are entered from bottom to top, just like they are sung.  Taking all of these into account the first word works out to look like this:</p>

<div class="legende">
<a href="Exaudivit-04.png"><img src="Exaudivit-04.png" alt="Notes for the first word.  Click to enlarge..." width=500/></a>
</div>

<p>If you paid attention while you were typing, you’ll have noticed that Illuminare automatically matches parentheses when you type the opening one.  That's to help you create well formed gabc code that won’t result in errors.  Looking at the output, we can also see that hyphens get inserted automatically when they are needed.  We don’t have the exact same hyphens as the original score because of minor variations in spacing and that’s something I’m not going to really worry about now.</p>

<p>What I am going to worry about, however, is the fact that a couple of my letters appear to be a bit different from the original.  Looking closely at the original score we can see that the <code>x</code> is capitalized and that there is an accent on the first <code>i</code>.  Before we go any further we should fix these two issues.  Fortunately fixing them is easy.  In the first case we just replace <code>x</code> with <code>X</code> and in the second we replace <code>i</code> with <code>í</code>.  Now, if you keyboard doesn’t have a <code>í</code> on it, you could use whatever method your operating system provides for inputing such characters.  Without knowing your OS I can’t tell you what that is, but every modern OS has one.  However, Illuminare has provided a shortcut for us.  If we place the cursor to the right of the <code>i</code> and enter <code>'</code> then it will automatically swap out the <code>i'</code> sequence for <code>í</code>.  It’s a convenient feature and one that will be used several times as we enter the rest of the score.</p>

<div class="legende">
<a href="Exaudivit-05.png"><img src="Exaudivit-05.png" alt="Revised first word.  Click to enlarge..." width=500/></a>
</div>

<p>Having finished with the first word, we’re ready for the next feature which is a <a href="../gabc/index.html#bars">bar line</a>.  In particular this is a <i lang="la">divisio minima</i> (represented by a comma (<code>,</code>)) and it has an asterisk below it.  That asterisk is treated just like the text in the first word and the bar line is the equivalent of a note attached to its “syllable”:</p>

<div class="legende">
<a href="Exaudivit-06.png"><img src="Exaudivit-06.png" alt="First bar.  Click to enlarge..." width=500/></a>
</div>

<p>That was easy.  Further, given what we’ve done so far you should be able to enter the next couple of syllables without too much trouble.  When you get to the syllable “plo” however, you’ll find that there is a horizontal line over one of the notes and we haven’t discussed these yet.  This line is what is known as an <a href="../gabc/details.html#signs">horizontal <i lang="la">episema</i></a> (sometimes referred to simply as an <i lang="la">episema</i>, pl. <i lang="la">episemata</i>).  Adding one to a note simply requires that we put an underscore (<code>_</code>) after the letter corresponding to the pitch.  With that information you should also be able to do the next word too:</p>

<div class="legende">
<a href="Exaudivit-07.png"><img src="Exaudivit-07.png" alt="Notes with horizontal episemata.  Click to enlarge..." width=500/></a>
</div>

<p>The word that follows, however, has a far more complicated <a href="../structure.html">neume</a> than we’ve seen thus far.  What do we need to do to get that swooping structure (a <i lang="la">porrectus</i>)?  Well, let’s start by entering the notes associated with the neume:</p>

<div class="legende">
<a href="Exaudivit-08.png"><img src="Exaudivit-08.png" alt="Porrectus.  Click to enlarge..." width=500/></a>
</div>

<p>Well, what do you know.  Just entering the notes was enough for Gregorio to do the right thing.  Indeed, you’ll find that this is often the case.  Gregorio is aware of the conventions that govern the choice of glyphs that go into a neume and <a href="../gabc/index.html#complexneumes">follows them automatically.</a>  You’ll only need to intervene when you have a score that breaks those conventions (a fairly rare occurrence).</p>

<p>Looking at the next syllable we see something new to deal with again: dots after the notes (<a href="../gabc/details.html#signs"><i lang="la">punctum moræ</i></a>).  These function much like the horizontal <i lang="la">episamata</i> we saw earlier in that they are represented by a period (<code>.</code>) after the note:</p>

<div class="legende">
<a href="Exaudivit-09.png"><img src="Exaudivit-09.png" alt="Punctum moræ.  Click to enlarge..." width=500/></a>
</div>

<p>The bar that follows we handle just like we did before, just without the asterisk this time.  I’m also going to introduce a hard linebreak into my gabc at this point.  This line break doesn’t affect the way the score is laid out visually, it just helps me navigate the source should I need to go back and find a particular place later to make a change.  Indeed, normally I add a line break after every bar line so I’m also going to go back and put one in after the one we did earlier.  You’re free to adopt whatever convention you want for inserting linebreaks.</p>

<p>After the line break we come across a neume which has a wiggly note in it.  This is what is known as a <i lang="la">quilisma</i> and is one of the <a href="../gabc/index.html#onenote">different note shapes</a> we come across in Gregorian chant.  In gabc we indicate that a note should be a <i lang="la">quilisma</i> by putting a <code>w</code> after the letter identifying the pitch.  Along with the rest of the word this gives us:</p>

<div class="legende">
<a href="Exaudivit-10.png"><img src="Exaudivit-10.png" alt="Quilisma.  Click to enlarge..." width=500/></a>
</div>

<p id="nospace">Hold on a moment!  Why is there that extra space between the first two notes and the second two?  Well, as it turns out, Gregorio has shifted those two notes in order to avoid a potential collision with the <i lang="la">punctum mora</i> on the first note.  Try taking it out and you’ll see that the two top notes shift back to where we want them to be.  Now the <i lang="la">punctum mora</i> and the higher notes will not collide if they are placed in the desired positions, so how do we get the notes to be attached and have the <i lang="la">punctum mora</i>?  The answer is to tell Gregorio not to put a <a href="../gabc/details.html#spaces">space</a> before the <i lang="la">quilisma</i>.  This is accomplished with an exclamation point (<code>!</code>):</p>

<div class="legende">
<a href="Exaudivit-11.png"><img src="Exaudivit-11.png" alt="No space!  Click to enlarge..." width=500/></a>
</div>

<p>The next feature of the score we reproducing is the half-note that ends the line.  This is called a <i lang="la">custos</i> and is used to advise the singer as to what the first note of the next line is.  Since we’re not actually ready to end the line in our score, we’re going to ignore it for now and instead enter the remaining text and notes through the “alleluia”.  That should be enough material to figure out where to end our line.  Along the way we have to deal with two <a href="../gabc/index.html#bars">bar lines</a> we haven’t seen before: the partial bar (<i lang="la">divisio minor</i>) and the full bar (<i lang="la">divsio maior</i>).  The first is represented by a semi-colon (<code>;</code>) and the second by a colon (<code>:</code>):</p>

<div class="legende">
<a href="Exaudivit-12.png"><img src="Exaudivit-12.png" alt="Line break and custos.  Click to enlarge..." width=500/></a>
</div>

<p>Hey!  What do you know, Gregorio has automatically inserted the line break with the correct <i lang="la">custos</i> for us.  We don’t actually have to describe that portion of the score.  This makes it much easier to reuse scores in different contexts where things may change the line breaking decisions (width of page, size of text, <i>etc.</i>).  As a result we can just ignore the line breaks in our source and keep going.</p>

<p>All is not well, however.  If you look at the syllable “le” you’ll notice that two notes which are not joined in the source appear to have been joined automatically by Gregorio.  If you look really close at the image, you’ll note that they are not actually joined, they are just so close together that the <i lang="la">virgæ</i> (the stem joining the two stacked notes and the stem descending from the highest note) appear to merge. We don’t want that, so we need to tell Gregorio to put more <a href="../gabc/details.html#spaces">space</a> in there, the opposite of what we did earlier.  The character for that is a forward slash (<code>/</code>) and I’m actually going to put in two of them to get a larger space:</p>

<div class="legende">
<a href="Exaudivit-13.png"><img src="Exaudivit-13.png" alt="Add some space.  Click to enlarge..." width=500/></a>
</div>

<p>As we continue with the score, the next novelties that we encounter are in the word “<i lang="la">clamor</i>”.  Let’s start by simply inputting the notes and lyrics to the end of that word:</p>

<div class="legende">
<a href="Exaudivit-14.png"><img src="Exaudivit-14.png" alt="Notes to “clamor”.  Click to enlarge..." width=500/></a>
</div>

<p id="nospacegroup">To start with the first syllable of “<i lang="la">clamor</i>,” there are two issues to deal with: first the notes have not been grouped together correctly, and second there’s a tick-mark that is supposed to be below the middle note of the sequence.  To deal with the first we have to tell Gregorio where the note grouping boundaries are.  We do this by introducing an exclamation point (<code>!</code>) between the two note groups.  You’ll recall that <a href="#nospace">we used this character earlier</a> to tell Gregorio not to put a space between the two note groups in the first syllable of “<i lang="la">vocem</i>”.  In that case Gregorio was already grouping the notes correctly, it was just introducing extra space.  In this instance we have the opposite case: Greogrio is not introducing any extra space, but it is not grouping the notes correctly.  The exclamation point (<code>!</code>) is a no-space group boundary for the notes and so it works in both cases to correct what Gregorio is doing wrong.  To add the tick-mark, what’s called a <a href="../gabc/details.html#signs">vertical <i lang="la">episema</i> (or <i lang="la">ictus</i>)</a>, we need to add an apostrophe (<code>'</code>) after the note that needs the mark:</p>

<div class="legende">
<a href="Exaudivit-15.png"><img src="Exaudivit-15.png" alt="Regroup notes and add ictus.  Click to enlarge..." width=500/></a>
</div>

<p>Having fixed the first syllable of “<i lang="la">clamor</i>” we now need to fix the second.  In this syllable the second, higher note is smaller than normal.  This is called a <a href="../gabc/details.html#liquescences">diminutive <i lang="la">liquescent</i></a> and is represented in gabc by appending a tilde (<code>~</code>) to the note:</p>

<div class="legende">
<a href="Exaudivit-16.png"><img src="Exaudivit-16.png" alt="Linquesent.  Click to enlarge..." width=500/></a>
</div>

<p>Our next challenge comes in our next word, “<i lang="la">meus</i>,” where we have a pair of diamond shaped notes (as opposed to the square ones we’ve largely been dealing with thus far).  These notes are called <a href="../gabc/index.html#onenote"><i lang="la">punctum inclinatum</i></a> (the square notes are called <i lang="la">punctum quadratum</i>) and are indicated by capitalizing the letter corresponding to the appropriate pitch:</p>

<div class="legende">
<a href="Exaudivit-17.png"><img src="Exaudivit-17.png" alt="Punctum inclinatum.  Click to enlarge..." width=500/></a>
</div>

<p id="challenge">At this point, we’ve actually been over quite a number of features of gabc.  Enough, in fact, that you should be able to input everything up to but not including the last word of the third line (“<i lang="la">ejus</i>”) using what we’ve been over.  In fact, I challenge you to do just that before continuing with the tutorial.  Review what you need to and when you’ve got all of those notes entered, <a href="./tutorial-gabc-02.html">click here to continue with the tutorial.</a>


<!-- footer -->
    </div>
    <div class="bottom">
    </div>
    <script>initialize_menu();</script>
  </body>
</html>
